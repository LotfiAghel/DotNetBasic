@using AdminBaseComponenets;
@using ClTool
@using Microsoft.AspNetCore.Components.Forms
@using System.Net.Http
@using System.IO
@using System.Threading;
@inherits ValueInput<string>



@if (!string.IsNullOrWhiteSpace(value))
{
    <span>
        @value
    </span>
    <img src=@($"{ClTool.WebClient.webClient.baseUrl}Upload/{value}") class="img" />
    <Button Color=@Color.Danger Clicked=@(()=> setNull())>null</Button>
}
else
{
    <div class="@AlertClass" role="alert">
        @AlertMessage
    </div>
    <div class="progress mb-3" style="height: 20px;">
        <div class="progress-bar" role="progressbar" style="width: @ProgressPercentage%;" aria-valuenow="@ProgressPercentage" aria-valuemin="0" aria-valuemax="100">@ProgressPercentage% Complete</div>
    </div>

    <form @onsubmit="OnSubmit" class="needs-validation" novalidate>
        <div class="input-group mb-3">
            <InputFile @key=@(inputFileId) class="form-control" id="inputFile" OnChange="OnInputFileChange" aria-describedby="uploadButton" required />
            <button class="btn btn-primary" type="submit" id="uploadButton" disabled="@IsUploadDisabled">
                <span class="oi oi-cloud-upload" aria-hidden="true"></span> Upload Selected File
            </button>
        </div>
        <div class="invalid-feedback">
            Please select a file to upload.
        </div>
    </form>
}
@code
{
    [CascadingParameter(Name="FilesDirectory")]
    public string FilesDirectory { get; set; }
}
